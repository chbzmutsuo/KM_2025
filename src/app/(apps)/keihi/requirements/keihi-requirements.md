## 技術スタックとアーキテクチャ概要

### 1. 使用技術

フロントエンド: Next.js, Tailwind CSS
データベース: PostgreSQL
ORM: Prisma
その他: 必要に応じて追加可能

### 2. プロジェクト構造

マイクロフロントエンド的アプローチを採用:

- /app/(apps) 配下に独立したアプリケーションを配置
- 各アプリは独立して動作し、相互に影響を与えない
- 開発は各アプリのディレクトリ内で完結

### 3. バックエンド設計方針

Server Actions優先アプローチ:

- 特別な理由がない限り、REST APIの代わりにServer Actionsを使用
- 実装場所: app/(apps)/{アプリ名}/actions/
- 命名規則: {機能名}**{アクション名}
  例: auth**login, user\_\_register
- 注意: Server Actionsの制約により、asyncファンクションのみエクスポート可能
  (user.registerのようなネスト構造は不可)

### 4. Prismaスキーマ設計方針

リレーション命名規則:

- すべてのリレーションフィールドは相手先テーブル名の最初を大文字にした形で命名
- 例: UserモデルからStoreモデルへのリレーション → User.Store
- 複数形での命名（例：stores）は使用しない

# 経費記録＋インサイト生成アプリ 要件定義書（v1.2）

## 🎯 アプリの目的

- MoneyForwardへの経費入力を効率化する。
- 経費記録に付随するビジネス・技術インサイトをAIで自動生成・蓄積する。
- タグの自動生成により、情報の再利用性を高める。

---

## 🖥 フォーム入力項目一覧

| カテゴリ | 項目名             | 入力形式             | 補足                               |
| -------- | ------------------ | -------------------- | ---------------------------------- |
| 基本情報 | 日付               | 日付 or 8桁自動変換  | 例：20250612 → 2025/06/12          |
|          | 金額               | 数値                 | 半角数字                           |
|          | 科目               | セレクト             | 接待交際費、通信費、消耗品費など   |
|          | 場所               | テキスト             | 会場や店舗名など                   |
|          | 相手名             | テキスト             | 個人名または法人名                 |
|          | 相手の職種・業種   | セレクト or 自由記述 | 業種分類に活用（タグ生成精度向上） |
|          | 会話の目的         | セレクト or テキスト | 営業／開発相談／業務報告 など      |
|          | キーワード         | 複数テキスト         | 会話トピック（AI生成のヒント）     |
| 会話記録 | 会話内容の要約     | テキストエリア       | 1〜3文程度の自然文要約             |
| 評価     | 学びの深さ・重要度 | セレクト（1〜5）     | 後のナレッジ分析に活用             |
| 添付     | ファイル添付       | 任意                 | レシート、名刺、メモなどの画像/PDF |

---

## 🔁 登録後の処理フロー

1. 入力情報を基に、生成AIが以下を生成：
   - 営業インサイト（詳細・要約）
   - 技術インサイト（詳細・要約）
   - 自動タグ（複数、分類あり）
2. 生成された情報と入力内容をDBに保存
3. 要約情報をMoneyForward摘要欄へ転記（手動 or API）

---

## 🏷 タグ機能仕様

- **自動生成**：AIがキーワードや文脈からタグを生成（例：#飲食業界, #React, #教育DX）
- **分類**：業界／技術／トピックなどのカテゴリを想定（v2以降）
- **後編集**：登録後に手動編集・追加も可能
- **検索性**：タグによる記録検索・分類機能（v2以降に実装予定）

---

## 📦 データベース設計（簡略ER図）
