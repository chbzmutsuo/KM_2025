# **筋トレ記録WEBアプリ 要件定義書**

## **1. 概要**

個人の筋力トレーニング活動を効率的に記録・可視化し、データに基づいた継続的な成長を支援するシングルユーザー向けWEBアプリケーション。

## **2. 機能要件**

### **2.1. 種目マスタ管理 (CRUD)**

- ユーザーがトレーニング種目を自由に管理できる。
- **画面**: 「設定」タブ内に配置する。
- **機能**: 種目の新規追加、編集、削除。
- **項目**:
- 部位 (例: 胸, 足)
- 項目名 (例: ベンチプレス)
- 強度単位 (例: kg, lb, min)

### **2.2. トレーニング記録管理 (CRUD)**

- 日々のトレーニング内容（セット単位）を記録・管理する。
- **画面**: 「記録」タブ内のカレンダーから日付を選択してアクセスする。
- **機能**: 記録の新規追加、編集、削除、および同一内容のセットのクイック追加。
- **項目**:
- 日付
- 種目 (種目マスタから選択)
- 強度 (数値)
- 回数 (数値)

## **3. UI/UX要件 (スマートフォン利用想定)**

### **3.1. メインナビゲーション**

- 画面下部に固定のナビゲーションバーを設置し、以下の3つの主要画面を切り替える。
- **記録**: トレーニングの記録と確認を行う。
- **分析**: 記録データをグラフで可視化する。
- **設定**: 種目マスタを管理する。

### **3.2. 「記録」タブ**

- **3.2.1. カレンダー画面 (デフォルト)**
- トレーニング記録が存在する日付をハイライト表示する。
- 日付をタップすると、その日の「記録一覧画面」へ遷移する。
- 月移動ボタンで表示月を切り替えられる。
- **3.2.2. 記録一覧画面 (日別)**
- 選択日の記録を**部位ごと**にグループ化して表示する。
- **サマリー表示**: その日の**総ボリューム** (強度 × 回数 の合計) を表示する。
- **PRハイライト**: 過去の最大強度を更新した記録に「PR」バッジを表示する。
- **クイック追加**: 各記録の横に「+」ボタンを設置。タップすると同じ強度・回数のセットを即座に追加する。
- 各記録に「編集」「削除」ボタンを配置する。
- 画面下部に「新しい種目を記録する」ボタンを配置し、「記録フォーム画面」へ遷移する。
- **3.2.3. 記録フォーム画面**
- **種目選択**:
- 「部位」による絞り込みと、「項目名」によるテキスト検索を併用できる。
- テキスト入力が空の場合でも、選択中の部位（未選択時は全種目）の一覧を表示する。
- **過去データ表示**:
- 種目を選択すると、目標設定の参考として以下の指標を表示する。
- **パフォーマンス指標 (6種)**:
- 過去の最高強度
- 過去の最高回数
- 最高セットボリューム (強度 × 回数)
- 過去1ヶ月の平均強度
- 過去1ヶ月の平均回数
- 推定1RM (Epley式: 強度 \* (1 + 回数 / 30))
- **強度推移グラフ**:
- 過去3ヶ月間の**週ごとの最大強度**を棒グラフで表示する (ライブラリ不使用)。

### **3.3. 「分析」タブ**

- **3.3.1. 分析タイプ切替**
- 画面上部のタブで「月間ダッシュボード」と「種目別分析」を切り替える。
- **3.3.2. 月間ダッシュボード**
- **表示基準切替**: 「ボリューム基準」と「回数基準」を切り替えるトグルを設置する。
- 月移動ボタンで表示月を切り替える。
- **月間サマリー**: 選択月の以下の4指標をカード形式で表示する。
- トレーニング日数
- 総セット数
- 総ボリューム (kg)
- PR更新数
- **部位別分析 (円グラフ)**:
- 表示基準に応じて、「部位別総ボリューム」または「部位別総回数」の割合を円グラフで表示する (ライブラリ不使用)。
- **月間推移 (棒グラフ)**:
- 過去6ヶ月間の各種指標の推移を棒グラフで表示する (ライブラリ不使用)。
- **3.3.3. 種目別分析**
- **全種目一覧表示**: 全ての種目を部位ごとにグループ化し、1ページにまとめて表示する。
- 各種目ごとに、以下の3つの指標の推移を**折れ線グラフ**で表示する (ライブラリ不使用)。
- トレーニングボリューム (日ごと)
- 最大挙上重量 (日ごと)
- 合計レップ数 (日ごと)

### **3.4. 「設定」タブ**

- **3.4.1. 種目マスタ管理画面**
- 登録されている種目マスタを一覧表示する。
- 各項目に「編集」「削除」ボタンを配置する。
- 「新規種目を追加」ボタンから種目追加フォームを開く。

## **4. データモデル**

### **4.1. exercise_masters (種目マスタ)**

| **カラム名** | **データ型** | **説明** |
| ------------ | ------------ | -------- |
| id           | INTEGER      | 主キー   |
| part         | VARCHAR      | 部位     |
| name         | VARCHAR      | 項目名   |
| unit         | VARCHAR      | 強度単位 |

### **4.2. workout_logList (トレーニング記録)**

| **カラム名** | **データ型** | **説明**                         |
| ------------ | ------------ | -------------------------------- |
| id           | INTEGER      | 主キー                           |
| exercise_id  | INTEGER      | exercise_masters.id への外部キー |
| date         | DATE         | 記録日                           |
| strength     | DECIMAL      | 強度                             |
| reps         | INTEGER      | 回数                             |

## **5. 非機能要件**

- **技術スタック**: Next.js (Client Components), Tailwind CSS
- **パフォーマンス**: スマートフォンでの快適な操作を保証する。
