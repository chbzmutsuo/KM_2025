# トレーニングアプリ データシーディング

このディレクトリには、トレーニングアプリのテスト用データを生成するシーディングスクリプトが含まれています。

## 概要

`seed-training-data.ts` は以下のテストデータを自動生成します：

- **種目マスタ**: 18種類の種目（胸、背中、肩、腕、足、有酸素）
- **ワークアウトログ**: 過去3ヶ月分のサンプル記録
- **リアルなデータ**: 種目に応じた適切な強度・回数・セット数

## 使用方法

### 1. 基本的な実行

```bash
# メインのpackage.jsonから実行
npm run seed:training

# または直接実行
npx tsx src/app/(apps)/training/seed/seed-training-data.ts
```

### 2. 開発用（ファイル監視）

```bash
# シーディングディレクトリで実行
cd src/app/(apps)/training/seed
npm run seed:dev
```

## 生成されるデータ

### 種目マスタ

| 部位   | 種目名                         | 単位 |
| ------ | ------------------------------ | ---- |
| 胸     | ベンチプレス                   | kg   |
| 胸     | ダンベルフライ                 | kg   |
| 胸     | プッシュアップ                 | 回   |
| 背中   | デッドリフト                   | kg   |
| 背中   | ラットプルダウン               | kg   |
| 背中   | バーベルロウ                   | kg   |
| 肩     | ショルダープレス               | kg   |
| 肩     | サイドレイズ                   | kg   |
| 腕     | バーベルカール                 | kg   |
| 腕     | トライセップスエクステンション | kg   |
| 足     | スクワット                     | kg   |
| 足     | レッグプレス                   | kg   |
| 有酸素 | ランニング                     | km   |
| 有酸素 | サイクリング                   | min  |

### ワークアウトログ

- **期間**: 過去3ヶ月
- **頻度**: 月3-5回のトレーニング日
- **内容**: 1日2-4種目、1-3セット
- **データ**: 種目に応じた適切な強度・回数

#### 強度設定例

- **ベンチプレス**: 60-100kg × 3-10回
- **スクワット**: 50-80kg × 3-10回
- **プッシュアップ**: 10-25回
- **ランニング**: 3-8km
- **サイクリング**: 20-50分

## 注意事項

1. **ユーザーID**: デフォルトで `userId = 1` を使用
2. **既存データ**: 重複を避けるため、既存のデータがある場合は事前にクリアすることを推奨
3. **データベース**: Prismaスキーマが正しく設定されている必要があります

## カスタマイズ

### ユーザーIDの変更

```typescript
// seed-training-data.ts の8行目
const userId = 1 // 変更したいユーザーID
```

### データ量の調整

```typescript
// トレーニング日の頻度
const trainingDaysInMonth = Math.floor(Math.random() * 3) + 3 // 3-5回

// 1日の種目数
const exercisesPerDay = Math.floor(Math.random() * 3) + 2 // 2-4種目

// セット数
const sets = Math.floor(Math.random() * 3) + 1 // 1-3セット
```

### 期間の変更

```typescript
// 過去何ヶ月分のデータを生成するか
for (let monthOffset = 0; monthOffset < 3; monthOffset++) {
  // 3を変更
}
```

## トラブルシューティング

### よくあるエラー

1. **Prisma接続エラー**
   - データベースが起動しているか確認
   - 環境変数（DATABASE_URL）が正しく設定されているか確認

2. **スキーマエラー**
   - `npx prisma generate` を実行
   - マイグレーションが完了しているか確認

3. **権限エラー**
   - データベースユーザーの権限を確認
   - テーブルの作成権限があるか確認

## 実行後の確認

シーディング完了後、以下の点を確認してください：

1. **種目マスタ**: 18個の種目が作成されているか
2. **ワークアウトログ**: 過去3ヶ月分の記録が作成されているか
3. **カレンダー表示**: 記録日が正しく表示されているか
4. **パフォーマンス指標**: 過去データが正しく計算されているか

## データクリア

必要に応じて、テストデータをクリアできます：

```sql
-- 注意: 本番環境では絶対に実行しないでください
DELETE FROM workout_logList WHERE userId = 1;
DELETE FROM exercise_masters WHERE userId = 1;
```
